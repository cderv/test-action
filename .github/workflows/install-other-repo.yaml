# This is a basic workflow to help you get started with Actions

name: test-checkout-repo

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the main branch
on: [workflow_dispatch, pull_request]

jobs:
  using-r:
    runs-on: ubuntu-20.04
    name: checkout-repo
    strategy:
      fail-fast: false
    steps:
      # - uses: hmarr/debug-action@v2
      - run: |
          branch=$(gh api repos/yihui/knitr-examples/branches | jq -cr '.[] | select(.name == "${{ github.head_ref }}") | .name')
          echo $branch
        shell: bash
      # - name: Retrieve knitr-examples
      #   uses: actions/checkout@v2
      #   with:
      #     repository: yihui/knitr-examples
      #     path: knitr-examples
      #     ref: ${{ github.head_ref }}
      #     clean: false
      - run: ls -lisa

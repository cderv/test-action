# This is a basic workflow to help you get started with Actions

name: test

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the main branch
on: 
  push:
    branches: [main]
    paths: .github/workflows/test.yaml

jobs:
  build:
    runs-on: macos-latest
   
    steps:
      - uses: actions/checkout@v2
        
      - uses: r-lib/actions/setup-r@v1
        
      - name: Install TinyTeX
        uses: r-lib/actions/setup-tinytex@5f1c134
        env:
          # install full prebuilt version
          TINYTEX_INSTALLER: TinyTeX
        
      - name: Install OS dependencies
        run: |
          brew update --quiet
          brew install --cask xquartz
          brew tap homebrew/cask-fonts
          brew install --cask font-source-code-pro
          brew install fontconfig
        
      - name: Check font
        run: ls -R ~/Library/fonts
        
      - name: Check font 2
        run: fc-list
        
      - name: Check font
        run: |
          install.packages("tinytex")
          tinytex:::tweak_path()
          system2("fc-list")
        shell: Rscript {0}
